<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Reading Dashboard Debug</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #0d1117; color: #f0f6fc; }
        .debug { background: #161b22; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .stat { background: #21262d; padding: 10px; margin: 5px; border-radius: 4px; }
        .number { font-size: 24px; font-weight: bold; color: #58a6ff; }
    </style>
</head>
<body>
    <h1>üìö Reading Dashboard Debug</h1>
    
    <div class="debug">
        <h2>Debug Info</h2>
        <div id="debug-info">Loading...</div>
    </div>
    
    <div class="debug">
        <h2>2025 Reading Stats</h2>
        <div class="stat">
            <div class="number" id="books-2025">-</div>
            <div>Books Read in 2025</div>
        </div>
        <div class="stat">
            <div class="number" id="total-books">-</div>
            <div>Total Books in Library</div>
        </div>
        <div class="stat">
            <div class="number" id="currently-reading">-</div>
            <div>Currently Reading</div>
        </div>
        <div class="stat">
            <div class="number" id="goal-progress">-</div>
            <div>Progress (26/90 = 28.9%)</div>
        </div>
    </div>

    <script>
        async function loadAndAnalyzeBooks() {
            try {
                const debugDiv = document.getElementById('debug-info');
                debugDiv.innerHTML = 'Loading books.json...';
                
                const response = await fetch('./books.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const books = await response.json();
                
                // Debug info
                debugDiv.innerHTML = `
                    <p>‚úÖ Successfully loaded books.json</p>
                    <p>üìä Total books: ${books.length}</p>
                    <p>üìù Sample book keys: ${Object.keys(books[0]).join(', ')}</p>
                    <p>üìÖ Sample Date Read: ${books[0]['Date Read']}</p>
                    <p>üìö Sample Shelf: ${books[0]['Shelf']}</p>
                `;
                
                // Calculate stats
                const books2025 = books.filter(book => 
                    book.Shelf === 'read' && 
                    book['Date Read'] && 
                    book['Date Read'].startsWith('2025')
                );
                
                const currentlyReading = books.filter(book => 
                    book.Shelf === 'currently-reading'
                );
                
                const goal = 90;
                const progress = Math.round((books2025.length / goal) * 100);
                
                // Update stats
                document.getElementById('books-2025').textContent = books2025.length;
                document.getElementById('total-books').textContent = books.length;
                document.getElementById('currently-reading').textContent = currentlyReading.length;
                document.getElementById('goal-progress').textContent = `${progress}%`;
                
                console.log('Books read in 2025:', books2025.length);
                console.log('Sample 2025 book:', books2025[0]);
                
            } catch (error) {
                document.getElementById('debug-info').innerHTML = `
                    <p style="color: #f85149;">‚ùå Error loading books: ${error.message}</p>
                    <p>Check the browser console for more details.</p>
                `;
                console.error('Error:', error);
            }
        }
        
        // Load when page loads
        document.addEventListener('DOMContentLoaded', loadAndAnalyzeBooks);
    </script>
</body>
</html>
